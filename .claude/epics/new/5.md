---
title: 路由和布局
issue_id: 004
status: ready
priority: high
assigned_to: unassigned
created: 2025-10-27T00:07:52Z
last_updated: 2025-10-27T00:07:52Z
version: 1.0
author: Claude Code PM System
epic: new
labels: ["task", "layout", "navigation"]
parallel: true
depends_on: []
estimated_hours: 7
story_points: 4
---

## 任务004：路由和布局

### 描述
创建完整的App Router布局系统，包括Header、Footer、Navigation组件和响应式设计。实现基础的路由结构和导航系统，为整个应用提供一致的布局框架和用户导航体验。

### 验收标准
- [ ] 创建根布局（Root Layout）作为应用的基础模板
- [ ] 实现Header组件，包含Logo、主导航菜单、主题切换和用户菜单
- [ ] 实现Footer组件，包含版权信息、链接和社交媒体
- [ ] 创建响应式Navigation组件，支持桌面和移动端
- [ ] 实现移动端汉堡菜单和抽屉式导航
- [ ] 设置基础路由结构（首页、关于、服务等）
- [ ] 实现面包屑导航组件
- [ ] 添加页面过渡动画和加载状态
- [ ] 确保SEO友好的meta标签和结构化数据
- [ ] 支持国际化路由结构准备

### 技术细节
- 使用Next.js 14 App Router架构
- 实现嵌套布局（Nested Layouts）
- 响应式设计使用Tailwind CSS
- 移动优先的导航设计
- Framer Motion页面过渡动画
- 使用React Server Components和Client Components混合架构

#### 核心布局结构：
```
src/app/
├── layout.tsx              # 根布局
├── page.tsx                # 首页
├── globals.css             # 全局样式
├── (main)/                 # 路由组
│   ├── layout.tsx          # 主布局
│   ├── page.tsx            # 主页
│   ├── about/
│   │   └── page.tsx        # 关于页面
│   ├── services/
│   │   └── page.tsx        # 服务页面
│   └── contact/
│       └── page.tsx        # 联系页面
└── (auth)/                 # 认证路由组
    ├── layout.tsx
    ├── login/
    │   └── page.tsx
    └── register/
        └── page.tsx
```

#### 组件结构：
```
src/components/
├── layout/
│   ├── Header/
│   │   ├── Header.tsx
│   │   ├── HeaderMobile.tsx
│   │   ├── Navigation.tsx
│   │   └── index.ts
│   ├── Footer/
│   │   ├── Footer.tsx
│   │   ├── FooterLinks.tsx
│   │   └── index.ts
│   ├── Breadcrumb/
│   │   ├── Breadcrumb.tsx
│   │   └── index.ts
│   └── PageTransition/
│       ├── PageTransition.tsx
│       └── index.ts
```

#### Header组件API：
```typescript
interface HeaderProps {
  fixed?: boolean;
  transparent?: boolean;
  showBreadcrumb?: boolean;
  className?: string;
}

interface NavigationProps {
  items: NavigationItem[];
  mobile?: boolean;
  orientation?: 'horizontal' | 'vertical';
}

interface NavigationItem {
  label: string;
  href: string;
  icon?: ReactNode;
  badge?: string;
  children?: NavigationItem[];
}
```

### 依赖关系
- Next.js 14项目已初始化（任务002）
- TypeScript配置完成（任务002）
- 主题系统实现（任务003）
- 基础UI组件可用（任务001）

### 工作量估算
- **根布局设计**：1.5小时
- **Header组件开发**：2小时
- **Footer组件开发**：1小时
- **Navigation组件开发**：1.5小时
- **响应式适配**：0.5小时
- **页面过渡动画**：0.5小时
- **路由结构设置**：0.5小时
- **总计**：7小时

### 完成标准
1. ✅ 所有页面都能正常加载和导航
2. ✅ 响应式设计在不同设备上正常工作
3. ✅ 移动端导航体验流畅
4. ✅ 页面过渡动画自然
5. ✅ SEO标签和meta信息正确设置
6. ✅ 面包屑导航准确反映当前页面位置
7. ✅ 无障碍性支持（键盘导航、屏幕阅读器）
8. ✅ 性能优化，避免不必要的重渲染

### 验证命令
```bash
# 启动开发服务器
npm run dev

# 测试所有路由
curl http://localhost:3000/
curl http://localhost:3000/about
curl http://localhost:3000/services
curl http://localhost:3000/contact

# 构建测试
npm run build
npm run start

# 检查SEO和可访问性
npm run lint
npm run build
```

### 根布局示例：
```typescript
// app/layout.tsx
import { Providers } from './providers';
import { Header } from '@/components/layout/Header';
import { Footer } from '@/components/layout/Footer';
import './globals.css';

export const metadata = {
  title: 'Claude Code PM',
  description: 'AI驱动的项目管理系统',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="zh-CN" suppressHydrationWarning>
      <body>
        <Providers>
          <div className="min-h-screen flex flex-col">
            <Header />
            <main className="flex-1">
              {children}
            </main>
            <Footer />
          </div>
        </Providers>
      </body>
    </html>
  );
}
```

### 导航配置示例：
```typescript
// config/navigation.ts
export const navigationItems: NavigationItem[] = [
  {
    label: '首页',
    href: '/',
  },
  {
    label: '关于',
    href: '/about',
  },
  {
    label: '服务',
    href: '/services',
    children: [
      { label: '项目管理', href: '/services/project-management' },
      { label: '代码审查', href: '/services/code-review' },
    ],
  },
  {
    label: '联系',
    href: '/contact',
  },
];
```

### 备注
这是应用的骨架结构，需要特别关注用户体验和性能。确保导航直观易用，响应式设计在各种设备上都能正常工作。页面过渡效果要提升用户体验而不是造成干扰。考虑到后续的国际化需求，布局结构要具有良好的扩展性。SEO优化要从一开始就考虑，使用语义化HTML标签和正确的meta标签。
